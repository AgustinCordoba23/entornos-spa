"use strict";(self.webpackChunkentornos_spa=self.webpackChunkentornos_spa||[]).push([[566],{3566:(X,_,l)=>{l.r(_),l.d(_,{UsuariosModule:()=>$});var C=l(9808),u=l(1083),h=l(5861),a=l(3075),t=l(5e3),Z=l(2803),T=l(6518),b=l(3949),P=l(3686),v=l(4834),p=l(7322),M=l(7531),w=l(7423),O=l(5245);let A=(()=>{class n{constructor(o,e,r,s){this.snackBar=o,this.authService=e,this.apiService=r,this.router=s,this.hidePassword=!0,this.hideConfirmPassword=!0}ngOnInit(){this.setForm()}setForm(){this.authService.getCurrentUser().then(o=>{this.form=new a.cw({nombre:new a.NI(o.nombre),email:new a.NI(o.email),password:new a.NI(""),confirmarPassword:new a.NI(""),rol:new a.NI(o.rol_relacion.nombre)})})}submit(){var o=this;return(0,h.Z)(function*(){var e,r,s,m;(null===(e=o.form.get("password"))||void 0===e?void 0:e.value)==(null===(r=o.form.get("confirmarPassword"))||void 0===r?void 0:r.value)?(null===(s=o.form.get("password"))||void 0===s?void 0:s.value.length)<6?o.snackBar.show("La contrase\xf1a debe tener m\xe1s de 6 caracteres."):(yield o.apiService.post("/cambiar-password",{nueva_password:null===(m=o.form.get("password"))||void 0===m?void 0:m.value}),o.snackBar.show("Cambios guardados con \xe9xito."),o.router.navigateByUrl("/")):o.snackBar.show("Las contrase\xf1as no coinciden.")})()}volver(){this.router.navigateByUrl("/")}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(Z.c),t.Y36(T.e),t.Y36(b.s),t.Y36(u.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-editar"]],decls:37,vars:6,consts:[[1,"pagina"],[1,"contenido"],[1,"titulo"],[1,"form-box",3,"formGroup","autocomplete","ngSubmit"],["appearance","fill"],["formControlName","nombre","matInput","","readonly",""],["formControlName","email","matInput","","readonly",""],["appearance","outline"],["formControlName","password","matInput","","required","",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],["formControlName","confirmarPassword","matInput","","required","",3,"type"],["formControlName","rol","matInput","","readonly",""],["type","submit",1,"submit-button"],["type","button",1,"volver-button",3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-menu"),t.TgZ(2,"div",1)(3,"span",2),t._uU(4,"Mi cuenta"),t.qZA(),t._UZ(5,"mat-divider"),t.TgZ(6,"form",3),t.NdJ("ngSubmit",function(){return e.submit()}),t.TgZ(7,"mat-form-field",4)(8,"mat-label"),t._uU(9,"Nombre completo"),t.qZA(),t._UZ(10,"input",5),t.qZA(),t.TgZ(11,"mat-form-field",4)(12,"mat-label"),t._uU(13,"Email"),t.qZA(),t._UZ(14,"input",6),t.qZA(),t.TgZ(15,"mat-form-field",7)(16,"mat-label"),t._uU(17,"Nueva contrase\xf1a"),t.qZA(),t._UZ(18,"input",8),t.TgZ(19,"button",9),t.NdJ("click",function(){return e.hidePassword=!e.hidePassword}),t.TgZ(20,"mat-icon"),t._uU(21),t.qZA()()(),t.TgZ(22,"mat-form-field",7)(23,"mat-label"),t._uU(24,"Confirmar nueva contrase\xf1a"),t.qZA(),t._UZ(25,"input",10),t.TgZ(26,"button",9),t.NdJ("click",function(){return e.hideConfirmPassword=!e.hideConfirmPassword}),t.TgZ(27,"mat-icon"),t._uU(28),t.qZA()()(),t.TgZ(29,"mat-form-field",4)(30,"mat-label"),t._uU(31,"Rol"),t.qZA(),t._UZ(32,"input",11),t.qZA(),t.TgZ(33,"button",12),t._uU(34," Guardar Cambios "),t.qZA(),t.TgZ(35,"button",13),t.NdJ("click",function(){return e.volver()}),t._uU(36," Volver "),t.qZA()()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",e.form)("autocomplete",!1),t.xp6(12),t.Q6J("type",e.hidePassword?"password":"text"),t.xp6(3),t.Oqu(e.hidePassword?"visibility_off":"visibility"),t.xp6(4),t.Q6J("type",e.hideConfirmPassword?"password":"text"),t.xp6(3),t.Oqu(e.hidePassword?"visibility_off":"visibility"))},directives:[P.M,v.d,a._Y,a.JL,a.sg,p.KE,p.hX,a.Fj,M.Nt,a.JJ,a.u,a.Q7,w.lW,p.R9,O.Hw],styles:[".pagina[_ngcontent-%COMP%]{display:flex;flex-direction:row}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{margin-left:50px;font-weight:400;font-size:40px;line-height:118.9%;color:#666;margin-top:50px;margin-bottom:45px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-color:#a6aac780}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-left:50px;margin-top:50px;display:flex;flex-direction:column;gap:13px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:360px;height:40px;margin-bottom:25px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-underline{display:none}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .submit-button[_ngcontent-%COMP%]{width:360px;height:40px;background:linear-gradient(180deg,#1A7F9D 0%,#00CA48 100%);border-radius:8px;border:0;margin-bottom:10px;font-weight:700;font-size:14px;line-height:140%;color:#fff;cursor:pointer}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .volver-button[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-content:center;justify-content:center;align-items:center;gap:10px;width:360px;height:40px;background:#0A3066;border-radius:8px;border:0;margin-bottom:10px;font-weight:700;font-size:14px;line-height:140%;color:#fff;cursor:pointer}"]}),n})();var x=l(9062),c=l(4999),U=l(4107),y=l(508);function N(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Nombre Completo"),t.qZA())}function L(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.hij(" ",o.nombre," ")}}function J(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Email"),t.qZA())}function I(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.hij(" ",o.email," ")}}function E(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Rol"),t.qZA())}function S(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.hij(" ",o.rol," ")}}function q(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Estado"),t.qZA())}function D(n,i){if(1&n&&(t.TgZ(0,"td",25),t._uU(1),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.hij(" ",o.estado," ")}}function Q(n,i){1&n&&(t.TgZ(0,"th",24),t._uU(1,"Acciones"),t.qZA())}function F(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"button",28),t.NdJ("click",function(){t.CHM(o);const r=t.oxw().$implicit;return t.oxw().cambiarEstado("deshabilitar",r.id)}),t._uU(1,"DESHABILITAR"),t.qZA()}}function B(n,i){if(1&n){const o=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(o);const r=t.oxw().$implicit;return t.oxw().cambiarEstado("habilitar",r.id)}),t._uU(1,"HABILITAR"),t.qZA()}}function k(n,i){if(1&n&&(t.TgZ(0,"td",25),t.YNc(1,F,2,0,"button",26),t.YNc(2,B,2,0,"button",27),t.qZA()),2&n){const o=i.$implicit;t.xp6(1),t.Q6J("ngIf","HABILITADO"==o.estado),t.xp6(1),t.Q6J("ngIf","HABILITADO"!=o.estado)}}function Y(n,i){1&n&&t._UZ(0,"tr",30)}function R(n,i){1&n&&t._UZ(0,"tr",31)}const z=function(){return[5,10,15,20]},H=[{path:"",pathMatch:"full",component:(()=>{class n{constructor(o){this.apiService=o,this.columnas=["Nombre Completo","Email","Rol","Estado","Acciones"],this.usuarios=[]}ngOnInit(){this.setForm(),this.setListado({}),this.paginator._intl.itemsPerPageLabel="Registros por p\xe1gina"}setForm(){this.form=new a.cw({nombre:new a.NI,rol:new a.NI,estado:new a.NI})}setListado(o){var e=this;return(0,h.Z)(function*(){e.usuarios=[],(yield e.apiService.getData("/usuarios/listar",{filtros:o})).forEach(s=>{0!=s.rol&&e.usuarios.push({id:s.id,nombre:s.nombre,email:s.email,rol:1==s.rol?"Jefe de C\xe1tedra":2==s.rol?"Responsable Administrativo":"Usuario",estado:s.estado})}),e.dataSource=new c.by(e.usuarios),e.dataSource.paginator=e.paginator})()}filtrar(){var o,e,r,s,m,g,f;let d={};(null===(o=this.form.get("nombre"))||void 0===o?void 0:o.value)&&(d.nombre=null===(e=this.form.get("nombre"))||void 0===e?void 0:e.value),(null===(r=this.form.get("rol"))||void 0===r?void 0:r.value)&&(d.rol=null===(s=this.form.get("rol"))||void 0===s?void 0:s.value),(null===(m=this.form.get("estado"))||void 0===m?void 0:m.value)&&(d.estado=1==(null===(g=this.form.get("estado"))||void 0===g?void 0:g.value)?"HABILITADO":2==(null===(f=this.form.get("estado"))||void 0===f?void 0:f.value)?"PENDIENTE":"DESHABILITADO"),this.setListado(d)}limpiar(){this.setListado({}),this.form.controls.nombre.setValue(null),this.form.controls.rol.setValue(null),this.form.controls.estado.setValue(null)}cambiarEstado(o,e){this.apiService.post(`/usuarios/${e}/${o}`,{}),this.limpiar()}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(b.s))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-listar"]],viewQuery:function(o,e){if(1&o&&t.Gf(x.NW,7),2&o){let r;t.iGM(r=t.CRH())&&(e.paginator=r.first)}},decls:61,vars:14,consts:[[1,"pagina"],[1,"contenido"],[1,"titulo"],[1,"container-filtros"],[1,"titulo-filtros"],[3,"formGroup","autocomplete","ngSubmit"],["appearance","outline"],["formControlName","nombre","matInput",""],["formControlName","rol"],[3,"value"],["formControlName","estado"],["type","submit",1,"filtrar-button"],["type","button",1,"limpiar-button",3,"click"],["mat-table","",3,"dataSource"],["matColumnDef","Nombre Completo"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","Email"],["matColumnDef","Rol"],["matColumnDef","Estado"],["matColumnDef","Acciones"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-header-cell",""],["mat-cell",""],["class","button-deshabilitar",3,"click",4,"ngIf"],["class","button-habilitar",3,"click",4,"ngIf"],[1,"button-deshabilitar",3,"click"],[1,"button-habilitar",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"app-menu"),t.TgZ(2,"div",1)(3,"span",2),t._uU(4,"Gestionar Usuarios"),t.qZA(),t._UZ(5,"mat-divider"),t.TgZ(6,"div",3)(7,"div",4)(8,"mat-icon"),t._uU(9,"filter_list"),t.qZA(),t.TgZ(10,"span"),t._uU(11,"Filtros"),t.qZA()(),t.TgZ(12,"form",5),t.NdJ("ngSubmit",function(){return e.filtrar()}),t.TgZ(13,"mat-form-field",6)(14,"mat-label"),t._uU(15,"Nombre completo"),t.qZA(),t._UZ(16,"input",7),t.qZA(),t.TgZ(17,"mat-form-field",6)(18,"mat-label"),t._uU(19,"Rol"),t.qZA(),t.TgZ(20,"mat-select",8)(21,"mat-option",9),t._uU(22,"Jefe de C\xe1tedra"),t.qZA(),t.TgZ(23,"mat-option",9),t._uU(24,"Responsable Administrativo"),t.qZA(),t.TgZ(25,"mat-option",9),t._uU(26,"Usuario"),t.qZA()()(),t.TgZ(27,"mat-form-field",6)(28,"mat-label"),t._uU(29,"Estado"),t.qZA(),t.TgZ(30,"mat-select",10)(31,"mat-option",9),t._uU(32,"Habilitado"),t.qZA(),t.TgZ(33,"mat-option",9),t._uU(34,"Pendiente"),t.qZA(),t.TgZ(35,"mat-option",9),t._uU(36,"Deshabilitado"),t.qZA()()(),t.TgZ(37,"button",11),t._uU(38," Filtrar "),t.qZA(),t.TgZ(39,"button",12),t.NdJ("click",function(){return e.limpiar()}),t._uU(40," Limpiar "),t.qZA()()(),t._UZ(41,"mat-divider"),t.TgZ(42,"table",13),t.ynx(43,14),t.YNc(44,N,2,0,"th",15),t.YNc(45,L,2,1,"td",16),t.BQk(),t.ynx(46,17),t.YNc(47,J,2,0,"th",15),t.YNc(48,I,2,1,"td",16),t.BQk(),t.ynx(49,18),t.YNc(50,E,2,0,"th",15),t.YNc(51,S,2,1,"td",16),t.BQk(),t.ynx(52,19),t.YNc(53,q,2,0,"th",15),t.YNc(54,D,2,1,"td",16),t.BQk(),t.ynx(55,20),t.YNc(56,Q,2,0,"th",15),t.YNc(57,k,3,2,"td",16),t.BQk(),t.YNc(58,Y,1,0,"tr",21),t.YNc(59,R,1,0,"tr",22),t.qZA(),t._UZ(60,"mat-paginator",23),t.qZA()()),2&o&&(t.xp6(12),t.Q6J("formGroup",e.form)("autocomplete",!1),t.xp6(9),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(6),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(7),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.columnas),t.xp6(1),t.Q6J("matRowDefColumns",e.columnas),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(13,z))("pageSize",10))},directives:[P.M,v.d,O.Hw,a._Y,a.JL,a.sg,p.KE,p.hX,a.Fj,M.Nt,a.JJ,a.u,U.gD,y.ey,c.BZ,c.w1,c.fO,c.ge,c.Dz,c.ev,C.O5,c.as,c.XQ,c.nj,c.Gk,x.NW],styles:[".pagina[_ngcontent-%COMP%]{display:flex;flex-direction:row}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .titulo[_ngcontent-%COMP%]{margin-left:50px;font-weight:400;font-size:40px;line-height:118.9%;color:#666;margin-top:50px;margin-bottom:45px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{border-top-color:#a6aac780}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px;margin-left:50px;height:113px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]   .titulo-filtros[_ngcontent-%COMP%]{display:flex;gap:10px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]   .titulo-filtros[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:600;font-size:20px;line-height:24px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]   .titulo-filtros[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-weight:600;height:15px}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:20px;display:flex;flex-direction:row;gap:40px;align-items:center}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding:0}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .filtrar-button[_ngcontent-%COMP%]{width:100px;height:40px;background:linear-gradient(180deg,#1C819F 0%,#00CA48 100%);border-radius:8px;border:0;font-weight:700;font-size:18px;line-height:140%;color:#fff;text-align:center;cursor:pointer}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   .container-filtros[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .limpiar-button[_ngcontent-%COMP%]{width:100px;height:40px;border:0;background:#1C819F;border-radius:8px;font-weight:700;font-size:18px;line-height:140%;color:#fff;text-align:center;cursor:pointer}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;font-size:16.48px;line-height:118.9%}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-weight:400;font-size:16px;line-height:118.9%}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-habilitar[_ngcontent-%COMP%]{width:80px;height:30px;background:#0A3066;border-radius:8px;border:0;font-weight:700;font-size:12px;line-height:140%;text-align:center;color:#fff;cursor:pointer}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   .button-deshabilitar[_ngcontent-%COMP%]{width:80px;height:30px;background:#660A36;border:0;border-radius:8px;font-weight:700;font-size:9px;line-height:140%;text-align:center;color:#fff;cursor:pointer}.pagina[_ngcontent-%COMP%]   .contenido[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-of-type(even){background:#F5F7F7}"]}),n})()},{path:"editar",component:A}];let j=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[u.Bz.forChild(H)],u.Bz]}),n})();var G=l(7826);let $=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[C.ez,j,G.m]]}),n})()}}]);